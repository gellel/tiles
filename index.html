<!doctype html>
<html>
	<head>
		<title>double</title>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta http-equiv="Content-Language" content="en">
		<meta name="viewport" content="width=device-width, initial-scale=1">
	</head>
	<body>
		<script src="js/prototypes.js"></script>
		<script src="js/keyframe.js"></script>
		<script src="js/queue.js"></script>
		<script src="js/heap.js"></script>
		<script src="js/base.js"></script>
		<script src="js/grid.js"></script>
		<script src="js/graph.js"></script>
		<script src="js/path.js"></script>
		<script src="js/tile.js"></script>
		<script src="js/simplex.js"></script>
		<script src="js/character.js"></script>
		<script src="js/canvas.js"></script>
		<script type="text/javascript">

			var geography = [
				{ class: "ocean", ref: "", related: [], cost: 7, hex: "#25a9cb" },
				{ class: "ocean", ref: "", related: [], cost: 6, hex: "#28aed0" },

				{ class: "sea", ref: "", related: [], cost: 5, hex: "#32b7d8" }, 
				{ class: "sea", ref: "", related: [], cost: 4, hex: "#3dc2e3" }, 

				{ class: "coast", ref: "", related: [], cost: 3, hex: "#4ccbeb" }, 
				{ class: "coast", ref: "", related: [], cost: 2, hex: "#57d8f8" },

				{ class: "shore", ref: "", related: [], cost: 1, hex: "#6ee0fc" },
				{ class: "shore", ref: "", related: [], cost: 5, hex: "#77e3fd" },
				{ class: "shore", ref: "", related: [], cost: 3, hex: "#b1e1d1" },
				{ class: "shore", ref: "", related: [], cost: 3, hex: "#cae1b1" }, 

				{ class: "beach", ref: "", related: [], cost: 3, hex: "#ebe8b5" }, 
				{ class: "beach", ref: "", related: [], cost: 2, hex: "#e3dfa1" }, 

				{ class: "sand", ref: "", related: [], cost: 1, hex: "#e1dd9d" },

				{ class: "soil", ref: "", related: [], cost: 0, hex: "#dbd793" }, 

				{ class: "grass", ref: "", related: [], cost: 1, hex: "#64d977" }, 
				{ class: "grass", ref: "", related: [], cost: 2, hex: "#56d16a" }, 
				{ class: "grass", ref: "", related: [], cost: 3, hex: "#4cc760" },

				{ class: "hill", ref: "", related: [], cost: 1, hex: "#47c55c" },
				{ class: "hill", ref: "", related: [], cost: 2, hex: "#42c458" },
				{ class: "hill", ref: "", related: [], cost: 3, hex: "#3ec054" },
				{ class: "hill", ref: "", related: [], cost: 4, hex: "#38bb4e" },

				{ class: "alpine", ref: "", related: [], cost: 1, hex: "#38bb69" },
				{ class: "alpine", ref: "", related: [], cost: 2, hex: "#38ae64" },
				{ class: "alpine", ref: "", related: [], cost: 3, hex: "#369c5c" },
				{ class: "alpine", ref: "", related: [], cost: 4, hex: "#469263" },
				{ class: "alpine", ref: "", related: [], cost: 5, hex: "#4b8761" }
			];


			var grid = new Grid({ __init__: true, columns: 100, rows: 60, scale: 10 });

			var graph = new Graph(Object.assign(grid.__this__(), { __class__: Tile }));

			var base = new Canvas(Object.assign(grid.__this__(), { attr: { style: "position: absolute; z-index: 1" } }));

			var dirs = new Canvas(Object.assign(grid.__this__(), { attr: { style: "position: absolute; z-index: 2" } }));
				
			var char = new Canvas(Object.assign(grid.__this__(), { attr: { style: "position: absolute; z-index: 3" } }));

			var path = new Path(Object.assign(graph.__this__(), { __copy__: true }));


			
			var simplex = new Simplex({
				amplitude: 0.001,
				frequency: 0.010,
				octaves: 1,
				max: geography.length,
				min: 0
			});

			graph.getTiles(function (tile) {

				var n = simplex.noise2d(tile.column, tile.row);
				var f = parseInt(Math.abs(n));
				var g = geography[f];

				//console.log('colour is:', Canvas.RGB(f, 0, 0))
				//console.log(g)
				base.drawGeometry("fill", tile.x, tile.y, tile.width, tile.height, { fillStyle: g.hex })
				//base.drawGeometry("fill", tile.x, tile.y, tile.width, tile.height, { fillStyle: Canvas.RGB(f, 0, 0) })
				//base.drawFillText(tile.x, tile.y + tile.height / 2, f, "normal 10px/normal sans-serif", { fillStyle: Canvas.RGB(0, 0, 0)}); 

				base.context.fillStyle = "transparent";

			});
			
			


		</script>
	</body>
</html>