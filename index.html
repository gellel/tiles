<!doctype html>
<html>
	<head>
		<title>double</title>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta http-equiv="Content-Language" content="en">
		<meta name="viewport" content="width=device-width, initial-scale=1">
	</head>
	<body>
		<script src="js/prototypes.js"></script>
		<script src="js/keyframe.js"></script>
		<script src="js/queue.js"></script>
		<script src="js/heap.js"></script>
		<script src="js/base.js"></script>
		<script src="js/grid.js"></script>
		<script src="js/graph.js"></script>
		<script src="js/path.js"></script>
		<script src="js/tile.js"></script>
		<script src="js/simplex.js"></script>
		<script src="js/character.js"></script>
		<script src="js/canvas.js"></script>
		<script type="text/javascript">

			var geography = [
				{ class: "ocean", ref: "", related: [], hex: "#25a9cb" },
				{ class: "ocean", ref: "", related: [], hex: "#28aed0" },

				{ class: "sea", ref: "", related: [], hex: "#32b7d8" }, 
				{ class: "sea", ref: "", related: [], hex: "#3dc2e3" }, 

				{ class: "coast", ref: "", related: [], hex: "#4ccbeb" }, 
				{ class: "coast", ref: "", related: [], hex: "#57d8f8" },

				{ class: "shore", ref: "", related: [], hex: "#6ee0fc" },
				{ class: "shore", ref: "", related: [], hex: "#77e3fd" },
				{ class: "shore", ref: "", related: [], hex: "#b1e1d1" },
				{ class: "shore", ref: "", related: [], hex: "#cae1b1" }, 

				{ class: "beach", ref: "", related: [], hex: "#ebe8b5" }, 
				{ class: "beach", ref: "", related: [], hex: "#e3dfa1" }, 

				{ class: "sand", ref: "", related: [], hex: "#e1dd9d" },

				{ class: "soil", ref: "", related: [], hex: "#dbd793" }, 

				{ class: "grass", ref: "", related: [], hex: "#64d977" }, 
				{ class: "grass", ref: "", related: [], hex: "#56d16a" }, 
				{ class: "grass", ref: "", related: [], hex: "#4cc760" },

				{ class: "hill", ref: "", related: [], hex: "#47c55c" },
				{ class: "hill", ref: "", related: [], hex: "#42c458" },
				{ class: "hill", ref: "", related: [], hex: "#3ec054" },
				{ class: "hill", ref: "", related: [], hex: "#38bb4e" },

				{ class: "alpine", ref: "", related: [], hex: "#38bb69" },
				{ class: "alpine", ref: "", related: [], hex: "#38ae64" },
				{ class: "alpine", ref: "", related: [], hex: "#369c5c" },
				{ class: "alpine", ref: "", related: [], hex: "#469263" },
				{ class: "alpine", ref: "", related: [], hex: "#4b8761" },

				{ class: "artic", ref: "", related: [], hex: "#5f8c6f" },
				{ class: "artic", ref: "", related: [], hex: "#809e8b" },
				{ class: "artic", ref: "", related: [], hex: "#a6baad" },
				{ class: "artic", ref: "", related: [], hex: "#b6cbbe" },
				{ class: "artic", ref: "", related: [], hex: "#cedbd3" },
				{ class: "artic", ref: "", related: [], hex: "#dce9e1" }
			];


			var grid = new Grid({ __init__: true, columns: 100, rows: 60, scale: 10 });

			var graph = new Graph(Object.assign(grid.__this__(), { __class__: Tile }));

			var base = new Canvas(Object.assign(grid.__this__(), { attr: { style: "position: absolute; z-index: 1" } }));

			var dirs = new Canvas(Object.assign(grid.__this__(), { attr: { style: "position: absolute; z-index: 2" } }));
				
			var char = new Canvas(Object.assign(grid.__this__(), { attr: { style: "position: absolute; z-index: 3" } }));

			var path = new Path(Object.assign(graph.__this__(), { __copy__: true }));


			var simplex = new Simplex({
				amplitude: 0.001,
				frequency: 0.010,
				persistence: 0.51,
				octaves: 10,
				max: geography.length,
				min: 0
			});

			graph.editTiles(function (tile) {
				return Object.assign(tile, geography[parseInt(Math.abs(simplex.noise2d(tile.column, tile.row)))])
			})

			graph.getTiles(function (tile) {

				base.drawGeometry("fill", tile.x, tile.y, tile.width, tile.height, { fillStyle: tile.hex });
				//base.drawFillText(tile.x, tile.y + tile.height / 2, f, "normal 10px/normal sans-serif", { fillStyle: Canvas.RGB(0, 0, 0)}); 

			});
			
			


		</script>
	</body>
</html>